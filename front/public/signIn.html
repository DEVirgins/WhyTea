<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <script>
        var params = location.href.search;
        if(!(params instanceof URLSearchParams))
            params = new URLSearchParams(params)
        let code = params.get("code")

        let xhr = new XMLHttpRequest();

        xhr.open('GET', `/api/login/vk?code=${code}`)

        xhr.send();

        if (xhr.status !== 200) {
            console.log( xhr.status + ': ' + xhr.statusText );
        } else {
            console.log(xhr.response);

            window.localStorage.setItem('access_token: ', xhr.response)
        }

        window.close();

        //
        // "GET /api/login/vk?code=" "GET /api/login/google"
        // "{'access_token': qwjifjasdsindign}" -> localstorage

    </script>
</head>
<body>
    <div class="g-signin2" data-onsuccess="onSignIn"></div>
</body>
</html>
